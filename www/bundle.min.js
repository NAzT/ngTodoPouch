(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){module.exports=function($stateProvider){$stateProvider.state("login",{url:"/login",controller:["$scope","$accountSvc","growl",require("./login/account-login-controller")],template:require("./login/account-login.html")}).state("register",{url:"/register",controller:["$scope","$accountSvc","growl",require("./register/account-register-controller")],template:require("./register/account-register.html")}).state("forgot",{url:"/forgot",controller:["$scope","$accountSvc",require("./forgot/account-forgot-controller")],template:require("./forgot/account-forgot.html")}).state("reset",{url:"/reset",controller:["$scope","$accountSvc",require("./reset/account-reset-controller")],template:require("./reset/account-reset.html")})}},{"./forgot/account-forgot-controller":2,"./forgot/account-forgot.html":3,"./login/account-login-controller":5,"./login/account-login.html":6,"./register/account-register-controller":7,"./register/account-register.html":8,"./reset/account-reset-controller":9,"./reset/account-reset.html":10}],2:[function(require,module,exports){module.exports=function($scope){}},{}],3:[function(require,module,exports){module.exports='<div class="container">\n<h2>Forgot Password</h2>\n<form novalidate ng-submit="forgot(user)">\n  <div class="form-group">\n    <label>Email</label>\n    <input class="form-control" ng-model="user.email">\n  </div>\n  <div class="form-group">\n    <button class="btn btn-default">Submit</button>\n  </div>\n</form>\n</div>\n'},{}],4:[function(require,module,exports){module.exports=angular.module("account",[]).config(["$stateProvider",require("./account-config")]).factory("$accountSvc",["$http",require("./services/account-service")])},{"./account-config":1,"./services/account-service":11}],5:[function(require,module,exports){module.exports=function($scope,$accountSvc,growl){$scope.login=function(user){user.name=angular.lowercase(user.name);$accountSvc.$login(user).then(function(info){growl.addSuccessMessage("Successfully Logged in!");$scope.$emit("account:loggedIn",{name:user.name})},function(err){growl.addErrorMessage(err.data.message)})}}},{}],6:[function(require,module,exports){module.exports='<div class="container">\n<form name="form" novalidate ng-submit="login(user)">\n  <div class="form-group">\n    <label>Username</label>\n    <input class="form-control" ng-model="user.name" required>\n  </div>\n  <div class="form-group">\n    <label>Password</label>\n    <input class="form-control" type="password" ng-model="user.password" required>\n  </div>\n  <div class="form-group">\n    <button class="btn btn-default" ng-disabled="form.$invalid">Login</button>\n  </div>\n</form>\n</div>\n'},{}],7:[function(require,module,exports){module.exports=function($scope,$accountSvc,growl){$scope.register=function(user){user.name=angular.lowercase(user.name);$accountSvc.$register(user).then(function(info){growl.addSuccessMessage("Successfully Registered!");$scope.$emit("account:registered",{name:user.name})},function(err){growl.addErrorMessage(err.data.message)})}}},{}],8:[function(require,module,exports){module.exports='<div class="container">\n<form name="form" novalidate ng-submit="register(user)">\n  <div class="form-group">\n    <label>Username</label>\n    <input class="form-control" ng-model="user.name" required>\n  </div>\n  <div class="form-group">\n    <label>Email</label>\n    <input class="form-control" type="email" ng-model="user.email"  required>\n  </div>\n  <div class="form-group">\n    <label>Password</label>\n    <input class="form-control" type="password" ng-model="user.password" required>\n  </div>\n  <div class="form-group">\n    <label>Confirm Password</label>\n    <input class="form-control" type="password" ng-model="confirm" required>\n  </div>\n  <div class="form-group">\n    <button class="btn btn-default" ng-disabled="form.$invalid || (confirm.length > 0 && user.password !== confirm)">\n      Register\n    </button>\n  </div>\n</form>\n</div>\n'},{}],9:[function(require,module,exports){module.exports=require(2)},{}],10:[function(require,module,exports){module.exports='<div class="container">\n<h2>Forgot Password</h2>\n<form novalidate ng-submit="reset(user)">\n  <div class="form-group">\n    <label>Reset Code</label>\n    <input class="form-control" ng-model="user.reset">\n  </div>\n  <div class="form-group">\n    <button class="btn btn-default">Submit</button>\n  </div>\n</form>\n</div>\n'},{}],11:[function(require,module,exports){module.exports=function($http){return{$register:function(user){return $http.post("/api/register",user)},$login:function(user){return $http.post("/api/login",user)}}}},{}],12:[function(require,module,exports){module.exports=function($urlRouterProvider,$httpProvider){$urlRouterProvider.otherwise("/")}},{}],13:[function(require,module,exports){module.exports=function($scope,$state,$db,$http,$origin){var session=function(e,user){$scope.user=user.name;var opts={live:true};var remoteDb=$origin+"/db/"+user.name;$db(user.name).sync(remoteDb,opts);$db(user.name).changes({since:"latest",live:true}).on("change",function(change){$scope.$broadcast("database:changed",change)});$state.go("lists.index")};$http.get("/api/session").then(function(res){console.log(res.data);if(res.data.error){return $state.go("splash")}session(null,{name:res.data.userCtx.name})},function(){$state.go("splash")});$scope.title="The Ultimate TODO App";$scope.$on("account:registered",session);$scope.$on("account:loggedIn",session);$scope.logout=function(){$http.post("/api/logout").then(function(){$scope.user=null;$state.go("splash")})}}},{}],14:[function(require,module,exports){require("angular-ui-router/release/angular-ui-router");require("angular-sanitize/angular-sanitize");require("angular-growl/build/angular-growl");angular.module("TodoApp",["ui.router","ngSanitize","angular-growl",require("./splash").name,require("./account").name,require("./lists").name]).config(["$urlRouterProvider","$httpProvider",require("./app-config")]).controller("ApplicationCtrl",["$scope","$state","$db","$http","$origin",require("./app-controller")]).factory("$db",function(){return function(user){return PouchDB(user+"_todos")}}).constant("$us",require("underscore")).factory("$origin",["$window",function($window){return $window.location.origin}])},{"./account":4,"./app-config":12,"./app-controller":13,"./lists":15,"./splash":25,"angular-growl/build/angular-growl":26,"angular-sanitize/angular-sanitize":27,"angular-ui-router/release/angular-ui-router":28,underscore:29}],15:[function(require,module,exports){module.exports=angular.module("lists",[]).config(["$stateProvider",require("./list-config")]).factory("$todoSvc",["$db",require("./services/todo-service")])},{"./list-config":18,"./services/todo-service":21}],16:[function(require,module,exports){module.exports=function($scope,$todoSvc){var loadList=function(){$todoSvc.$all($scope.user,function(err,res){$scope.$apply(function(){$scope.lists=res.rows.map(function(row){return row.value})})})};$scope.$on("database:changed",function(e,change){loadList()});loadList()}},{}],17:[function(require,module,exports){module.exports='<div class="container">\n  <div class="pull-right">\n    <a class="btn btn-default" ui-sref="lists.new">New List</a>\n  </div>\n  <h2>Todo Lists</h2>\n  <div class="list-group">\n    <a\n      class="list-group-item"\n      ui-sref="lists.show({ id: list._id})"\n      ng-repeat="list in lists">\n      <span class="badge badge-default pull-right">\n        {{list.tasks.length}} Tasks\n      </span>\n      {{list.name}}\n    </a>\n  </div>\n</div>\n'},{}],18:[function(require,module,exports){module.exports=function($stateProvider){$stateProvider.state("lists",{url:"/lists","abstract":true,template:"<div ui-view></div>"}).state("lists.index",{url:"/",controller:["$scope","$todoSvc",require("./index/list-index-controller")],template:require("./index/list-index.html")}).state("lists.new",{url:"/new",controller:["$scope","$todoSvc","$state",require("./new/list-new-controller")],template:require("./new/list-new.html")}).state("lists.show",{url:"/:id",controller:["$scope","$todoSvc","$stateParams","$state","$us","$window",require("./show/list-show-controller")],template:require("./show/list-show.html")})}},{"./index/list-index-controller":16,"./index/list-index.html":17,"./new/list-new-controller":19,"./new/list-new.html":20,"./show/list-show-controller":22,"./show/list-show.html":23}],19:[function(require,module,exports){module.exports=function($scope,$todoSvc,$state){$scope.save=function(todolist){$todoSvc.$post($scope.user,todolist).then(function(list){$state.go("lists.index")},function(err){console.log(err)})}}},{}],20:[function(require,module,exports){module.exports='<div class="container">\n  <h2>New List</h2>\n  <form novalidate ng-submit="save(list)">\n    <div class="form-group">\n      <label>Name</label>\n      <input class="form-control" ng-model="list.name">\n    </div>\n    <div class="form-group">\n      <label>Description</label>\n      <input class="form-control" ng-model="list.description">\n    </div>\n    <div class="form-group">\n      <label>Tags</label>\n      <input class="form-control" ng-model="list.tags">\n    </div>\n    <div class="form-group">\n      <button class="btn btn-default">Save</button>\n    </div>\n  </form>\n</div>\n'},{}],21:[function(require,module,exports){module.exports=function($db){return{$all:function(name,cb){$db(name).query(function(doc){if(doc.type==="list"&&doc.status==="active")emit(doc._id,doc)},cb)},$post:function(name,doc){doc.type="list";doc.status="active";return $db(name).post(doc)},$put:function(name,doc){return $db(name).put(doc)},$get:function(name,id){return $db(name).get(id)},$remove:function(name,doc){return $db(name).remove(doc)}}}},{}],22:[function(require,module,exports){module.exports=function($scope,$todoSvc,$stateParams,$state,$us,$window){var get=function(id){$todoSvc.$get($scope.user,id).then(function(doc){$scope.$apply(function(){console.log(doc);$scope.list=doc})})};get($stateParams.id);$scope.add=function(task){if(!$scope.list.tasks){$scope.list.tasks=[]}$scope.list.tasks.push({description:task.description});$scope.task=null};$scope.save=function(list){$todoSvc.$put($scope.user,list).then(function(doc){$scope.$apply(function(){$state.go("lists.index")})})};$scope.rmDone=function(list){var isOpen=function(t){return!t.done};var result=$us.partition(list.tasks,isOpen);$scope.list.tasks=$us(result).first();if(!$scope.list.completed){$scope.list.completed=[]}$scope.list.completed=$us.union(result[0],$scope.list.completed)};$scope.rmTask=function(task){$scope.list.tasks=$us($scope.list.tasks).without(task)};$scope.rmList=function(list){if($window.confirm("Are you sure?")){$todoSvc.$remove($scope.user,list).then(function(res){$scope.$apply(function(){$state.go("lists.index")})})}};$scope.$on("database:changed",function(e,change){if(change.id===$scope.list._id){get(change.id)}})}},{}],23:[function(require,module,exports){module.exports='<div class="container">\n  <div class="pull-right">\n    <button class="btn btn-warning" ng-click="rmDone(list)">\n      Archive Completed Tasks\n    </button>\n    <button class="btn btn-default" ng-click="save(list)">\n      Save\n    </button>\n  </div>\n  <h2>\n    {{list.name}}\n    <span class="glyphicon glyphicon-trashglyphicon glyphicon-trash" style="font-size: .5em;" ng-click="rmList(list)"></span>\n  </h2>\n  <p>{{list.description}}</p>\n  <form class="form-horizontal" novalidate ng-submit="add(task)">\n    <div class="form-group">\n      <input class="form-control" placeholder="Add Task and Press Enter" ng-model="task.description">\n    </div>\n  </form>\n  <ul class="list-group">\n    <li class="list-group-item" ng-repeat="task in list.tasks | orderBy:\'done\':false">\n      <div class="pull-right">\n        <i class="glyphicon glyphicon-trashglyphicon glyphicon-trash" ng-click="rmTask(task)"></i>\n      </div>\n      <div class="checkbox">\n        <label>\n          <input class="" type="checkbox" ng-model="task.done">\n          {{task.description}}\n        </label>\n      </div>\n    </li>\n  </ul>\n</div>\n'},{}],24:[function(require,module,exports){module.exports='<div class="jumbotron">\n  <div class="container">\n    <h1>Ultimate Task List</h1>\n  </div>\n</div>\n<div class="container">\n  <p>Welcome to the ultimate todo list application, it works offline, online and only any device that has a web browser!</p>\n  <a class="btn btn-default btn-lg" ui-sref="login" ng-show="!user">Login</a>\n  <a class="btn btn-default btn-lg" ui-sref="register" ng-show="!user">Register</a>\n  <a class="btn btn-default btn-lg" ui-sref="lists.index" ng-show="user">My Lists</a>\n</div>\n'},{}],25:[function(require,module,exports){module.exports=angular.module("splash",[]).config(function($stateProvider){$stateProvider.state("splash",{url:"/",controller:["$scope",function($scope,growl){}],template:require("./index.html")})})},{"./index.html":24}],26:[function(require,module,exports){angular.module("angular-growl",[]);angular.module("angular-growl").directive("growl",["$rootScope",function($rootScope){"use strict";return{restrict:"A",template:'<div class="growl">'+'	<div class="growl-item alert" ng-repeat="message in messages" ng-class="computeClasses(message)">'+'		<button type="button" class="close" ng-click="deleteMessage(message)">&times;</button>'+'       <div ng-switch="message.enableHtml">'+'           <div ng-switch-when="true" ng-bind-html="message.text"></div>'+'           <div ng-switch-default ng-bind="message.text"></div>'+"       </div>"+"	</div>"+"</div>",replace:false,scope:true,controller:["$scope","$timeout","growl",function($scope,$timeout,growl){var onlyUnique=growl.onlyUnique();$scope.messages=[];function addMessage(message){$scope.messages.push(message);if(message.ttl&&message.ttl!==-1){$timeout(function(){$scope.deleteMessage(message)},message.ttl)}}$rootScope.$on("growlMessage",function(event,message){var found;if(onlyUnique){angular.forEach($scope.messages,function(msg){if(message.text===msg.text&&message.severity===msg.severity){found=true}});if(!found){addMessage(message)}}else{addMessage(message)}});$scope.deleteMessage=function(message){var index=$scope.messages.indexOf(message);if(index>-1){$scope.messages.splice(index,1)}};$scope.computeClasses=function(message){return{"alert-success":message.severity==="success","alert-error":message.severity==="error","alert-danger":message.severity==="error","alert-info":message.severity==="info","alert-warning":message.severity==="warn"}}}]}}]);angular.module("angular-growl").provider("growl",function(){"use strict";var _ttl=null,_enableHtml=false,_messagesKey="messages",_messageTextKey="text",_messageSeverityKey="severity",_onlyUniqueMessages=true;this.globalTimeToLive=function(ttl){_ttl=ttl};this.globalEnableHtml=function(enableHtml){_enableHtml=enableHtml};this.messagesKey=function(messagesKey){_messagesKey=messagesKey};this.messageTextKey=function(messageTextKey){_messageTextKey=messageTextKey};this.messageSeverityKey=function(messageSeverityKey){_messageSeverityKey=messageSeverityKey};this.onlyUniqueMessages=function(onlyUniqueMessages){_onlyUniqueMessages=onlyUniqueMessages};this.serverMessagesInterceptor=["$q","growl",function($q,growl){function checkResponse(response){if(response.data[_messagesKey]&&response.data[_messagesKey].length>0){growl.addServerMessages(response.data[_messagesKey])}}function success(response){checkResponse(response);return response}function error(response){checkResponse(response);return $q.reject(response)}return function(promise){return promise.then(success,error)}}];this.$get=["$rootScope","$filter",function($rootScope,$filter){var translate;try{translate=$filter("translate")}catch(e){}function broadcastMessage(message){if(translate){message.text=translate(message.text)}$rootScope.$broadcast("growlMessage",message)}function sendMessage(text,config,severity){var _config=config||{},message;message={text:text,severity:severity,ttl:_config.ttl||_ttl,enableHtml:_config.enableHtml||_enableHtml};broadcastMessage(message)}function addWarnMessage(text,config){sendMessage(text,config,"warn")}function addErrorMessage(text,config){sendMessage(text,config,"error")}function addInfoMessage(text,config){sendMessage(text,config,"info")}function addSuccessMessage(text,config){sendMessage(text,config,"success")}function addServerMessages(messages){var i,message,severity,length;length=messages.length;for(i=0;i<length;i++){message=messages[i];if(message[_messageTextKey]&&message[_messageSeverityKey]){switch(message[_messageSeverityKey]){case"warn":severity="warn";break;case"success":severity="success";break;case"info":severity="info";break;case"error":severity="error";break}sendMessage(message[_messageTextKey],undefined,severity)}}}function onlyUnique(){return _onlyUniqueMessages}return{addWarnMessage:addWarnMessage,addErrorMessage:addErrorMessage,addInfoMessage:addInfoMessage,addSuccessMessage:addSuccessMessage,addServerMessages:addServerMessages,onlyUnique:onlyUnique}}]})},{}],27:[function(require,module,exports){(function(window,angular,undefined){"use strict";var $sanitizeMinErr=angular.$$minErr("$sanitize");function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))}));return buf.join("")}}]}function sanitizeText(chars){var buf=[];var writer=htmlSanitizeWriter(buf,angular.noop);writer.chars(chars);return buf.join("")}var START_TAG_REGEXP=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,END_TAG_REGEXP=/^<\s*\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\s*\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g;var voidElements=makeMap("area,br,col,hr,img,wbr");var optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements);var blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,"+"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,"+"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul"));var inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,"+"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,"+"samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var specialElements=makeMap("script,style");var validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements);var uriAttrs=makeMap("background,cite,href,longdesc,src,usemap");var validAttrs=angular.extend({},uriAttrs,makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,"+"color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,"+"ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,"+"scope,scrolling,shape,size,span,start,summary,target,title,type,"+"valign,value,vspace,width"));function makeMap(str){var obj={},items=str.split(","),i;for(i=0;i<items.length;i++)obj[items[i]]=true;return obj}function htmlParser(html,handler){var index,chars,match,stack=[],last=html;stack.last=function(){return stack[stack.length-1]};while(html){chars=true;if(!stack.last()||!specialElements[stack.last()]){if(html.indexOf("<!--")===0){index=html.indexOf("--",4);if(index>=0&&html.lastIndexOf("-->",index)===index){if(handler.comment)handler.comment(html.substring(4,index));html=html.substring(index+3);chars=false}}else if(DOCTYPE_REGEXP.test(html)){match=html.match(DOCTYPE_REGEXP);if(match){html=html.replace(match[0],"");chars=false}}else if(BEGING_END_TAGE_REGEXP.test(html)){match=html.match(END_TAG_REGEXP);if(match){html=html.substring(match[0].length);match[0].replace(END_TAG_REGEXP,parseEndTag);chars=false}}else if(BEGIN_TAG_REGEXP.test(html)){match=html.match(START_TAG_REGEXP);if(match){html=html.substring(match[0].length);match[0].replace(START_TAG_REGEXP,parseStartTag);chars=false}}if(chars){index=html.indexOf("<");var text=index<0?html:html.substring(0,index);html=index<0?"":html.substring(index);if(handler.chars)handler.chars(decodeEntities(text))}}else{html=html.replace(new RegExp("(.*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1");if(handler.chars)handler.chars(decodeEntities(text));return""});parseEndTag("",stack.last())}if(html==last){throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block "+"of html: {0}",html)}last=html}parseEndTag();function parseStartTag(tag,tagName,rest,unary){tagName=angular.lowercase(tagName);if(blockElements[tagName]){while(stack.last()&&inlineElements[stack.last()]){parseEndTag("",stack.last())}}if(optionalEndTagElements[tagName]&&stack.last()==tagName){parseEndTag("",tagName)}unary=voidElements[tagName]||!!unary;if(!unary)stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)});if(handler.start)handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var pos=0,i;tagName=angular.lowercase(tagName);if(tagName)for(pos=stack.length-1;pos>=0;pos--)if(stack[pos]==tagName)break;if(pos>=0){for(i=stack.length-1;i>=pos;i--)if(handler.end)handler.end(stack[i]);stack.length=pos}}}var hiddenPre=document.createElement("pre");var spaceRe=/^(\s*)([\s\S]*?)(\s*)$/;function decodeEntities(value){if(!value){return""}var parts=spaceRe.exec(value);var spaceBefore=parts[1];var spaceAfter=parts[3];var content=parts[2];if(content){hiddenPre.innerHTML=content.replace(/</g,"&lt;");content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText}return spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=false;var out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag);if(!ignore&&specialElements[tag]){ignore=tag}if(!ignore&&validElements[tag]===true){out("<");out(tag);angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key);var isImage=tag==="img"&&lkey==="src"||lkey==="background";if(validAttrs[lkey]===true&&(uriAttrs[lkey]!==true||uriValidator(value,isImage))){out(" ");out(key);out('="');out(encodeEntities(value));out('"')}});out(unary?"/>":">")}},end:function(tag){tag=angular.lowercase(tag);if(!ignore&&validElements[tag]===true){out("</");out(tag);out(">")}if(tag==ignore){ignore=false}},chars:function(chars){if(!ignore){out(encodeEntities(chars))}}}}angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider);angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){if(!text)return text;var match;var raw=text;var html=[];var url;var i;while(match=raw.match(LINKY_URL_REGEXP)){url=match[0];if(match[2]==match[3])url="mailto:"+url;i=match.index;addText(raw.substr(0,i));addLink(url,match[0].replace(MAILTO_REGEXP,""));raw=raw.substring(i+match[0].length)}addText(raw);return $sanitize(html.join(""));function addText(text){if(!text){return}html.push(sanitizeText(text))}function addLink(url,text){html.push("<a ");if(angular.isDefined(target)){html.push('target="');html.push(target);html.push('" ')}html.push('href="');html.push(url);html.push('">');addText(text);html.push("</a>")}}}])})(window,window.angular)},{}],28:[function(require,module,exports){if(typeof module!=="undefined"&&typeof exports!=="undefined"&&module.exports===exports){module.exports="ui.router"}(function(window,angular,undefined){"use strict";var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){forEach(arguments,function(obj){if(obj!==dst){forEach(obj,function(value,key){if(!dst.hasOwnProperty(key))dst[key]=value})}});return dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function keys(object){if(Object.keys){return Object.keys(object)}var result=[];angular.forEach(object,function(val,key){result.push(key)});return result}function arraySearch(array,value){if(Array.prototype.indexOf){return array.indexOf(value,Number(arguments[2])||0)}var len=array.length>>>0,from=Number(arguments[2])||0;from=from<0?Math.ceil(from):Math.floor(from);if(from<0)from+=len;for(;from<len;from++){if(from in array&&array[from]===value)return from}return-1}function inheritParams(currentParams,newParams,$current,$to){var parents=ancestors($current,$to),parentParams,inherited={},inheritList=[];for(var i in parents){if(!parents[i].params||!parents[i].params.length)continue;parentParams=parents[i].params;for(var j in parentParams){if(arraySearch(inheritList,parentParams[j])>=0)continue;inheritList.push(parentParams[j]);inherited[parentParams[j]]=currentParams[parentParams[j]]}}return extend({},inherited,newParams)}function normalize(keys,values){var normalized={};forEach(keys,function(name){var value=values[name];normalized[name]=value!=null?String(value):null});return normalized}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return false}return true}function filterByKeys(keys,values){var filtered={};forEach(keys,function(name){filtered[name]=values[name]});return filtered}angular.module("ui.router.util",["ng"]);angular.module("ui.router.router",["ui.router.util"]);angular.module("ui.router.state",["ui.router.router","ui.router.util"]);angular.module("ui.router",["ui.router.state"]);angular.module("ui.router.compat",["ui.router"]);$Resolve.$inject=["$q","$injector"];function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){if(!isObject(invocables))throw new Error("'invocables' must be an object");var plan=[],cycle=[],visited={};function visit(value,key){if(visited[key]===VISIT_DONE)return;cycle.push(key);if(visited[key]===VISIT_IN_PROGRESS){cycle.splice(0,cycle.indexOf(key));throw new Error("Cyclic dependency: "+cycle.join(" -> "))}visited[key]=VISIT_IN_PROGRESS;if(isString(value)){plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES)}else{var params=$injector.annotate(value);forEach(params,function(param){if(param!==key&&invocables.hasOwnProperty(param))visit(invocables[param],param)});plan.push(key,value,params)}cycle.pop();visited[key]=VISIT_DONE}forEach(invocables,visit);invocables=cycle=visited=null;function isResolve(value){return isObject(value)&&value.then&&value.$$promises}return function(locals,parent,self){if(isResolve(locals)&&self===undefined){self=parent;parent=locals;locals=null}if(!locals)locals=NO_LOCALS;else if(!isObject(locals)){throw new Error("'locals' must be an object")}if(!parent)parent=NO_PARENT;else if(!isResolve(parent)){throw new Error("'parent' must be a promise returned by $resolve.resolve()")}var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=false;function done(){if(!--wait){if(!merged)merge(values,parent.$$values);result.$$values=values;result.$$promises=true;resolution.resolve(values)}}function fail(reason){result.$$failure=reason;resolution.reject(reason)}if(isDefined(parent.$$failure)){fail(parent.$$failure);return result}if(parent.$$values){merged=merge(values,parent.$$values);done()}else{extend(promises,parent.$$promises);parent.then(done,fail)}for(var i=0,ii=plan.length;i<ii;i+=3){if(locals.hasOwnProperty(plan[i]))done();else invoke(plan[i],plan[i+1],plan[i+2])}function invoke(key,invocable,params){var invocation=$q.defer(),waitParams=0;function onfailure(reason){invocation.reject(reason);fail(reason)}forEach(params,function(dep){if(promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)){waitParams++;promises[dep].then(function(result){values[dep]=result;if(!--waitParams)proceed()},onfailure)}});if(!waitParams)proceed();function proceed(){if(isDefined(result.$$failure))return;try{invocation.resolve($injector.invoke(invocable,self,values));invocation.promise.then(function(result){values[key]=result;done()},onfailure)}catch(e){onfailure(e)}}promises[key]=invocation.promise}return result}};this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}angular.module("ui.router.util").service("$resolve",$Resolve);$TemplateFactory.$inject=["$http","$templateCache","$injector"];function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null};this.fromString=function(template,params){return isFunction(template)?template(params):template};this.fromUrl=function(url,params){if(isFunction(url))url=url(params);if(url==null)return null;else return $http.get(url,{cache:$templateCache}).then(function(response){return response.data})};this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);function UrlMatcher(pattern){var placeholder=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,names={},compiled="^",last=0,m,segments=this.segments=[],params=this.params=[];function addParameter(id){if(!/^\w+(-+\w+)*$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(names[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");names[id]=true;params.push(id)}function quoteRegExp(string){return string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}this.source=pattern;var id,regexp,segment;while(m=placeholder.exec(pattern)){id=m[2]||m[3];regexp=m[4]||(m[1]=="*"?".*":"[^/]*");segment=pattern.substring(last,m.index);if(segment.indexOf("?")>=0)break;compiled+=quoteRegExp(segment)+"("+regexp+")";addParameter(id);segments.push(segment);last=placeholder.lastIndex}segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);segment=segment.substring(0,i);this.sourcePath=pattern.substring(0,last+i);forEach(search.substring(1).split(/[&?]/),addParameter)}else{this.sourcePath=pattern;this.sourceSearch=""}compiled+=quoteRegExp(segment)+"$";segments.push(segment);this.regexp=new RegExp(compiled);
this.prefix=segments[0]}UrlMatcher.prototype.concat=function(pattern){return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch)};UrlMatcher.prototype.toString=function(){return this.source};UrlMatcher.prototype.exec=function(path,searchParams){var m=this.regexp.exec(path);if(!m)return null;var params=this.params,nTotal=params.length,nPath=this.segments.length-1,values={},i;if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;i<nPath;i++)values[params[i]]=m[i+1];for(;i<nTotal;i++)values[params[i]]=searchParams[params[i]];return values};UrlMatcher.prototype.parameters=function(){return this.params};UrlMatcher.prototype.format=function(values){var segments=this.segments,params=this.params;if(!values)return segments.join("");var nPath=segments.length-1,nTotal=params.length,result=segments[0],i,search,value;for(i=0;i<nPath;i++){value=values[params[i]];if(value!=null)result+=encodeURIComponent(value);result+=segments[i+1]}for(;i<nTotal;i++){value=values[params[i]];if(value!=null){result+=(search?"&":"?")+params[i]+"="+encodeURIComponent(value);search=true}}return result};function $UrlMatcherFactory(){this.compile=function(pattern){return new UrlMatcher(pattern)};this.isMatcher=function(o){return isObject(o)&&isFunction(o.exec)&&isFunction(o.format)&&isFunction(o.concat)};this.$get=function(){return this}}angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory);$UrlRouterProvider.$inject=["$urlMatcherFactoryProvider"];function $UrlRouterProvider($urlMatcherFactory){var rules=[],otherwise=null;function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return prefix!=null?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match[what==="$"?0:Number(what)]})}this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");rules.push(rule);return this};this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");otherwise=rule;return this};function handleIfMatch($injector,handler,match){if(!match)return false;var result=$injector.invoke(handler,handler,{$match:match});return isDefined(result)?result:true}this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what))what=$urlMatcherFactory.compile(what);if(!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){if(handlerIsString){redirect=$urlMatcherFactory.compile(handler);handler=["$match",function($match){return redirect.format($match)}]}return extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");if(handlerIsString){redirect=handler;handler=["$match",function($match){return interpolate(redirect,$match)}]}return extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}};var check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check){if(check[n]){return this.rule(strategies[n](what,handler))}}throw new Error("invalid 'what' in when()")};this.$get=["$location","$rootScope","$injector",function($location,$rootScope,$injector){function update(evt){if(evt&&evt.defaultPrevented)return;function check(rule){var handled=rule($injector,$location);if(handled){if(isString(handled))$location.replace().url(handled);return true}return false}var n=rules.length,i;for(i=0;i<n;i++){if(check(rules[i]))return}if(otherwise)check(otherwise)}$rootScope.$on("$locationChangeSuccess",update);return{sync:function(){update()}}}]}angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider);$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"];function $StateProvider($urlRouterProvider,$urlMatcherFactory,$locationProvider){var root,states={},$state,queue={},abstractKey="abstract";var stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){if(state.parent&&state.parent.data){state.data=state.self.data=extend({},state.parent.data,state.data)}return state.data},url:function(state){var url=state.url;if(isString(url)){if(url.charAt(0)=="^"){return $urlMatcherFactory.compile(url.substring(1))}return(state.parent.navigable||root).url.concat(url)}if($urlMatcherFactory.isMatcher(url)||url==null){return url}throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},params:function(state){if(!state.params){return state.url?state.url.parameters():state.parent.params}if(!isArray(state.params))throw new Error("Invalid params in state '"+state+"'");if(state.url)throw new Error("Both params and url specicified in state '"+state+"'");return state.params},views:function(state){var views={};forEach(isDefined(state.views)?state.views:{"":state},function(view,name){if(name.indexOf("@")<0)name+="@"+state.parent.name;views[name]=view});return views},ownParams:function(state){if(!state.parent){return state.params}var paramNames={};forEach(state.params,function(p){paramNames[p]=true});forEach(state.parent.params,function(p){if(!paramNames[p]){throw new Error("Missing required parameter '"+p+"' in state '"+state.name+"'")}paramNames[p]=false});var ownParams=[];forEach(paramNames,function(own,p){if(own)ownParams.push(p)});return ownParams},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};includes[state.name]=true;return includes},$delegates:{}};function isRelative(stateName){return stateName.indexOf(".")===0||stateName.indexOf("^")===0}function findState(stateOrName,base){var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base)throw new Error("No reference point given for path '"+name+"'");var rel=name.split("."),i=0,pathLength=rel.length,current=base;for(;i<pathLength;i++){if(rel[i]===""&&i===0){current=base;continue}if(rel[i]==="^"){if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent;continue}break}rel=rel.slice(i).join(".");name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];if(state&&(isStr||!isStr&&(state===stateOrName||state.self===stateOrName))){return state}return undefined}function queueState(parentName,state){if(!queue[parentName]){queue[parentName]=[]}queue[parentName].push(state)}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"'' is already defined");var parentName=name.indexOf(".")!==-1?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:"";if(parentName&&!states[parentName]){return queueState(parentName,state.self)}for(var key in stateBuilder){if(isFunction(stateBuilder[key]))state[key]=stateBuilder[key](state,stateBuilder.$delegates[key])}states[name]=state;if(!state[abstractKey]&&state.url){$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){if($state.$current.navigable!=state||!equalForKeys($match,$stateParams)){$state.transitionTo(state,$match,{location:false})}}])}if(queue[name]){for(var i=0;i<queue[name].length;i++){registerState(queue[name][i])}}return state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){var globSegments=glob.split("."),segments=$state.$current.name.split(".");if(globSegments[0]==="**"){segments=segments.slice(segments.indexOf(globSegments[1]));segments.unshift("**")}if(globSegments[globSegments.length-1]==="**"){segments.splice(segments.indexOf(globSegments[globSegments.length-2])+1,Number.MAX_VALUE);segments.push("**")}if(globSegments.length!=segments.length){return false}for(var i=0,l=globSegments.length;i<l;i++){if(globSegments[i]==="*"){segments[i]="*"}}return segments.join("")===globSegments.join("")}root=registerState({name:"",url:"^",views:null,"abstract":true});root.navigable=null;this.decorator=decorator;function decorator(name,func){if(isString(name)&&!isDefined(func)){return stateBuilder[name]}if(!isFunction(func)||!isString(name)){return this}if(stateBuilder[name]&&!stateBuilder.$delegates[name]){stateBuilder.$delegates[name]=stateBuilder[name]}stateBuilder[name]=func;return this}this.state=state;function state(name,definition){if(isObject(name))definition=name;else definition.name=name;registerState(definition);return this}this.$get=$get;$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"];function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$location,$urlRouter,$browser){var TransitionSuperseded=$q.reject(new Error("transition superseded"));var TransitionPrevented=$q.reject(new Error("transition prevented"));var TransitionAborted=$q.reject(new Error("transition aborted"));var TransitionFailed=$q.reject(new Error("transition failed"));var currentLocation=$location.url();var baseHref=$browser.baseHref();function syncUrl(){if($location.url()!==currentLocation){$location.url(currentLocation);$location.replace()}}root.locals={resolve:null,globals:{$stateParams:{}}};$state={params:{},current:root.self,$current:root,transition:null};$state.reload=function reload(){$state.transitionTo($state.current,$stateParams,{reload:true,inherit:false,notify:false})};$state.go=function go(to,params,options){return this.transitionTo(to,params,extend({inherit:true,relative:$state.$current},options))};$state.transitionTo=function transitionTo(to,toParams,options){toParams=toParams||{};options=extend({location:true,inherit:false,relative:null,notify:true,reload:false,$retry:false},options||{});var from=$state.$current,fromParams=$state.params,fromPath=from.path;var evt,toState=findState(to,options.relative);if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options};evt=$rootScope.$broadcast("$stateNotFound",redirect,from.self,fromParams);if(evt.defaultPrevented){syncUrl();return TransitionAborted}if(evt.retry){if(options.$retry){syncUrl();return TransitionFailed}var retryTransition=$state.transition=$q.when(evt.retry);retryTransition.then(function(){if(retryTransition!==$state.transition)return TransitionSuperseded;redirect.options.$retry=true;return $state.transitionTo(redirect.to,redirect.toParams,redirect.options)},function(){return TransitionAborted});syncUrl();return retryTransition}to=redirect.to;toParams=redirect.toParams;options=redirect.options;toState=findState(to,options.relative);if(!isDefined(toState)){if(options.relative)throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'");throw new Error("No such state '"+to+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit)toParams=inheritParams($stateParams,toParams||{},$state.$current,toState);to=toState;var toPath=to.path;var keep,state,locals=root.locals,toLocals=[];for(keep=0,state=toPath[keep];state&&state===fromPath[keep]&&equalForKeys(toParams,fromParams,state.ownParams)&&!options.reload;keep++,state=toPath[keep]){locals=toLocals[keep]=state.locals}if(shouldTriggerReload(to,from,locals,options)){if(to.self.reloadOnSearch!==false)syncUrl();$state.transition=null;return $q.when($state.current)}toParams=normalize(to.params,toParams||{});if(options.notify){evt=$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams);if(evt.defaultPrevented){syncUrl();return TransitionPrevented}}var resolved=$q.when(locals);for(var l=keep;l<toPath.length;l++,state=toPath[l]){locals=toLocals[l]=inherit(locals);resolved=resolveState(state,toParams,state===to,resolved,locals)}var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--){exiting=fromPath[l];if(exiting.self.onExit){$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals)}exiting.locals=null}for(l=keep;l<toPath.length;l++){entering=toPath[l];entering.locals=toLocals[l];if(entering.self.onEnter){$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals)}}if($state.transition!==transition)return TransitionSuperseded;$state.$current=to;$state.current=to.self;$state.params=toParams;copy($state.params,$stateParams);$state.transition=null;var toNav=to.navigable;if(options.location&&toNav){$location.url(toNav.url.format(toNav.locals.globals.$stateParams));if(options.location==="replace"){$location.replace()}}if(options.notify){$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams)}currentLocation=$location.url();return $state.current},function(error){if($state.transition!==transition)return TransitionSuperseded;$state.transition=null;$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error);syncUrl();return $q.reject(error)});return transition};$state.is=function is(stateOrName,params){var state=findState(stateOrName);if(!isDefined(state)){return undefined}if($state.$current!==state){return false}return isDefined(params)&&params!==null?angular.equals($stateParams,params):true};$state.includes=function includes(stateOrName,params){if(isString(stateOrName)&&isGlob(stateOrName)){if(doesStateMatchGlob(stateOrName)){stateOrName=$state.$current.name}else{return false}}var state=findState(stateOrName);if(!isDefined(state)){return undefined}if(!isDefined($state.$current.includes[state.name])){return false}var validParams=true;angular.forEach(params,function(value,key){if(!isDefined($stateParams[key])||$stateParams[key]!==value){validParams=false}});return validParams};$state.href=function href(stateOrName,params,options){options=extend({lossy:true,inherit:false,absolute:false,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;params=inheritParams($stateParams,params||{},$state.$current,state);var nav=state&&options.lossy?state.navigable:state;var url=nav&&nav.url?nav.url.format(normalize(state.params,params||{})):null;if(!$locationProvider.html5Mode()&&url){url="#"+$locationProvider.hashPrefix()+url}if(baseHref!=="/"){if($locationProvider.html5Mode()){url=baseHref.slice(0,-1)+url}else if(options.absolute){url=baseHref.slice(1)+url}}if(options.absolute&&url){url=$location.protocol()+"://"+$location.host()+($location.port()==80||$location.port()==443?"":":"+$location.port())+(!$locationProvider.html5Mode()&&url?"/":"")+url}return url};$state.get=function(stateOrName,context){if(!isDefined(stateOrName)){var list=[];forEach(states,function(state){list.push(state.self)});return list}var state=findState(stateOrName,context);return state&&state.self?state.self:null};function resolveState(state,params,paramsAreFiltered,inherited,dst){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params,params);var locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];if(inherited)promises.push(inherited);forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:locals,params:$stateParams,notify:false})||""}];promises.push($resolve.resolve(injectables,locals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,locals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else{result.$$controller=view.controller}result.$$state=state;result.$$controllerAs=view.controllerAs;dst[name]=result}))});return $q.all(promises).then(function(values){return dst})}return $state}function shouldTriggerReload(to,from,locals,options){if(to===from&&(locals===from.locals&&!options.reload||to.self.reloadOnSearch===false)){return true}}}angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider);$ViewProvider.$inject=[];function $ViewProvider(){this.$get=$get;$get.$inject=["$rootScope","$templateFactory"];function $get($rootScope,$templateFactory){return{load:function load(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:true,async:true,params:{}};options=extend(defaults,options);if(options.view){result=$templateFactory.fromConfig(options.view,options.params,options.locals)}if(result&&options.notify){$rootScope.$broadcast("$viewContentLoading",options)}return result}}}}angular.module("ui.router.state").provider("$view",$ViewProvider);function $ViewScrollProvider(){var useAnchorScroll=false;this.useAnchorScroll=function(){useAnchorScroll=true};this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){if(useAnchorScroll){return $anchorScroll}return function($element){$timeout(function(){$element[0].scrollIntoView()},0,false)}}]}angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider);$ViewDirective.$inject=["$state","$injector","$uiViewScroll"];function $ViewDirective($state,$injector,$uiViewScroll){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}var service=getService(),$animator=service("$animator"),$animate=service("$animate");function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element);cb()},leave:function(element,cb){element.remove();cb()}}};if($animate){return{enter:function(element,target,cb){$animate.enter(element,null,target,cb)},leave:function(element,cb){$animate.leave(element,cb)}}}if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target);cb()},leave:function(element,cb){animate.leave(element);cb()}}}return statics()}var directive={restrict:"ECA",terminal:true,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(false)});scope.$on("$viewContentLoading",function(){updateView(false)});updateView(true);function cleanupLastView(){if(previousEl){previousEl.remove();previousEl=null}if(currentScope){currentScope.$destroy();currentScope=null}if(currentEl){renderer.leave(currentEl,function(){previousEl=null});previousEl=currentEl;currentEl=null}}function updateView(firstTime){var newScope=scope.$new(),name=currentEl&&currentEl.data("$uiViewName"),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(!firstTime&&previousLocals===latestLocals)return;var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function onUiViewEnter(){if(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp)){$uiViewScroll(clone)}});cleanupLastView()});latestLocals=$state.$current.locals[clone.data("$uiViewName")];currentEl=clone;currentScope=newScope;currentScope.$emit("$viewContentLoaded");currentScope.$eval(onloadExp)}}}};return directive}$ViewDirectiveFill.$inject=["$compile","$controller","$state"];function $ViewDirectiveFill($compile,$controller,$state){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var name=attrs.uiView||attrs.name||"",inherited=$element.inheritedData("$uiView");if(name.indexOf("@")<0){name=name+"@"+(inherited?inherited.state.name:"")}$element.data("$uiViewName",name);var current=$state.$current,locals=current&&current.locals[name];if(!locals){return}$element.data("$uiView",{name:name,state:locals.$$state});$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope;var controller=$controller(locals.$$controller,locals);if(locals.$$controllerAs){scope[locals.$$controllerAs]=controller}$element.data("$ngControllerController",controller);$element.children().data("$ngControllerController",controller)}link(scope)}}}}angular.module("ui.router.state").directive("uiView",$ViewDirective);angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill);function parseStateRef(ref){var parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!parsed||parsed.length!==4)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");if(stateData&&stateData.state&&stateData.state.name){return stateData.state}}$StateRefDirective.$inject=["$state","$timeout"];function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref);var params=null,url=null,base=stateContext(element)||$state.$current;var isForm=element[0].nodeName==="FORM";var attr=isForm?"action":"href",nav=true;var options={relative:base};var optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){if(option in optionsOverride){options[option]=optionsOverride[option]}});var update=function(newVal){if(newVal)params=newVal;if(!nav)return;var newHref=$state.href(ref.state,params,options);if(uiSrefActive){uiSrefActive.$$setStateInfo(ref.state,params)}if(!newHref){nav=false;return false}element[0][attr]=newHref};if(ref.paramExpr){scope.$watch(ref.paramExpr,function(newVal,oldVal){if(newVal!==params)update(newVal)},true);params=scope.$eval(ref.paramExpr)}update();if(isForm)return;element.bind("click",function(e){var button=e.which||e.button;if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target"))){$timeout(function(){$state.go(ref.state,params,options)});e.preventDefault()}})}}}$StateActiveDirective.$inject=["$state","$stateParams","$interpolate"];function $StateActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var state,params,activeClass;activeClass=$interpolate($attrs.uiSrefActive||"",false)($scope);this.$$setStateInfo=function(newState,newParams){state=$state.get(newState,stateContext($element));params=newParams;update()};$scope.$on("$stateChangeSuccess",update);function update(){if($state.$current.self===state&&matchesParams()){$element.addClass(activeClass)}else{$element.removeClass(activeClass)}}function matchesParams(){return!params||equalForKeys(params,$stateParams)}}]}}angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateActiveDirective);$IsStateFilter.$inject=["$state"];function $IsStateFilter($state){return function(state){return $state.is(state)}}$IncludedByStateFilter.$inject=["$state"];function $IncludedByStateFilter($state){return function(state){return $state.includes(state)}}angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter);$RouteProvider.$inject=["$stateProvider","$urlRouterProvider"];function $RouteProvider($stateProvider,$urlRouterProvider){var routes=[];onEnterRoute.$inject=["$$state"];function onEnterRoute($$state){this.locals=$$state.locals.globals;this.params=this.locals.$stateParams}function onExitRoute(){this.locals=null;this.params=null}this.when=when;function when(url,route){if(route.redirectTo!=null){var redirect=route.redirectTo,handler;if(isString(redirect)){handler=redirect}else if(isFunction(redirect)){handler=function(params,$location){return redirect(params,$location.path(),$location.search())}}else{throw new Error("Invalid 'redirectTo' in when()")}$urlRouterProvider.when(url,handler)}else{$stateProvider.state(inherit(route,{parent:null,name:"route:"+encodeURIComponent(url),url:url,onEnter:onEnterRoute,onExit:onExitRoute}))}routes.push(route);return this}this.$get=$get;$get.$inject=["$state","$rootScope","$routeParams"];function $get($state,$rootScope,$routeParams){var $route={routes:routes,params:$routeParams,current:undefined};function stateAsRoute(state){return state.name!==""?state:undefined}$rootScope.$on("$stateChangeStart",function(ev,to,toParams,from,fromParams){$rootScope.$broadcast("$routeChangeStart",stateAsRoute(to),stateAsRoute(from))});$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){$route.current=stateAsRoute(to);$rootScope.$broadcast("$routeChangeSuccess",stateAsRoute(to),stateAsRoute(from));copy(toParams,$route.params)});$rootScope.$on("$stateChangeError",function(ev,to,toParams,from,fromParams,error){$rootScope.$broadcast("$routeChangeError",stateAsRoute(to),stateAsRoute(from),error)});return $route}}angular.module("ui.router.compat").provider("$route",$RouteProvider).directive("ngView",$ViewDirective)})(window,window.angular)},{}],29:[function(require,module,exports){(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.6.0";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return obj;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,length=obj.length;i<length;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return}}return obj};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,predicate,context){var result;any(obj,function(value,index,list){if(predicate.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,predicate,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(predicate,context);each(obj,function(value,index,list){if(predicate.call(context,value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,function(value,index,list){return!predicate.call(context,value,index,list)},context)};_.every=_.all=function(obj,predicate,context){predicate||(predicate=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(predicate,context);each(obj,function(value,index,list){if(!(result=result&&predicate.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,predicate,context){predicate||(predicate=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(predicate,context);each(obj,function(value,index,list){if(result||(result=predicate.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs))};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}var result=-Infinity,lastComputed=-Infinity;each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;if(computed>lastComputed){result=value;lastComputed=computed}});return result};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}var result=Infinity,lastComputed=Infinity;each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;if(computed<lastComputed){result=value;lastComputed=computed}});return result};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(obj.length!==+obj.length)obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){if(value==null)return _.identity;if(_.isFunction(value))return value;return _.property(value)};_.sortBy=function(obj,iterator,context){iterator=lookupIterator(iterator);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;
var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iterator,context){var result={};iterator=lookupIterator(iterator);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result}};_.groupBy=group(function(result,key,value){_.has(result,key)?result[key].push(value):result[key]=[value]});_.indexBy=group(function(result,key,value){result[key]=value});_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1});_.sortedIndex=function(array,obj,iterator,context){iterator=lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];if(n<0)return[];return slice.call(array,0,n)};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return slice.call(array,Math.max(array.length-n,0))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input)}each(input,function(value){if(_.isArray(value)||_.isArguments(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.partition=function(array,predicate){var pass=[],fail=[];each(array,function(elem){(predicate(elem)?pass:fail).push(elem)});return[pass,fail]};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(_.flatten(arguments,true))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.contains(other,item)})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var length=_.max(_.pluck(arguments,"length").concat(0));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,length=list.length;i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,length=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,length+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<length;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var length=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(length);while(idx<length){range[idx++]=start;start+=step}return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}};_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){var position=0;var args=boundArgs.slice();for(var i=0,length=args.length;i<length;i++){if(args[i]===_)args[i]=arguments[position++]}while(position<arguments.length)args.push(arguments[position++]);return func.apply(this,args)}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)throw new Error("bindAll must be passed function names");each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout){timeout=setTimeout(later,wait)}if(callNow){result=func.apply(context,args);context=args=null}return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=new Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=new Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.property=function(key){return function(obj){return obj[key]}};_.matches=function(attrs){return function(obj){if(obj===attrs)return true;for(var key in attrs){if(attrs[key]!==obj[key])return false}return true}};_.times=function(n,iterator,context){var accum=Array(Math.max(0,n));for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}});if(typeof define==="function"&&define.amd){define("underscore",[],function(){return _})}}).call(this)},{}]},{},[14]);